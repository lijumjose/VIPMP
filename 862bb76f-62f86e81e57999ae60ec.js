"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[1233],{65480:function(e,a,l){l.d(a,{Z:function(){return _}});var t=l(15785),s=l(35776),o=l(92812),n=l(94184),i=l.n(n),r=l(55733),c=l.n(r),d=l(80925),p=l.n(d),u=l(93162),m=l(68457),v=l(53971),g=l(78980),f=l(52078),y=l(24808),w=l(48788),h=l(23766),b=l(47549),x=l(65034),C=l(11490);var Z={name:"1a50hjl",styles:"border:none;padding:0;font-family:'adobe-clean';background:transparent;color:var(--spectrum-global-color-gray-800);text-decoration:underline;cursor:pointer;&:hover{color:var(--spectrum-global-color-gray-900);}"},k={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},N={name:"wwrf8h",styles:"display:flex;flex-direction:column;gap:8px;width:80%"},D={name:"1swkvfk",styles:"padding:0;font-family:'adobe-clean';border:none;background:transparent;margin-left:10px;cursor:pointer;text-decoration:underline;color:rgb(0, 84, 182);&:hover{color:rgb(2, 101, 220);}"},S={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},z={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},P={name:"ti75j2",styles:"margin:0"},L={name:"a29rn1",styles:"display:flex;text-align:center;align-items:center;gap:10px"},B={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},j={name:"1xg43bt",styles:"display:flex;gap:20px;align-items:baseline"},A={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"};const _=e=>{var a,l;let{formData:n,response:r,handleRestart:d}=e;const{getCredentialData:M,selectedOrganization:E}=(0,s.useContext)(x.Z),I=M,{0:$,1:U}=(0,s.useState)(),{0:F,1:H}=(0,s.useState)(""),R={},O={label:"products",productList:[]};null==I||null===(a=I[_])||void 0===a||a.children.forEach((e=>{let{type:a,props:l}=e;var s,o;(R[a]=l,l.children&&a===h._)&&(R[a]=l,null==l||null===(s=l.children)||void 0===s||s.forEach((e=>{let{type:a,props:l}=e;R[a]=l})));a===g.bi&&null!=l&&l.children&&(o=O.productList).push.apply(o,(0,t.Z)([].concat(l.children).map((e=>{let{props:{label:a,icon:l}}=e;return{label:a,icon:l}}))))}));const T=null==O?void 0:O.productList;(0,s.useEffect)((()=>{n.Downloads&&G(`/console/api/organizations/${null==E?void 0:E.id}/projects/${r.projectId}/workspaces/${r.workspaceId}/download`,n.Download,n.zipUrl)}),[]);const J=null==I?void 0:I[_],G=async function(e,a,l){void 0===a&&(a="download"),U(!0);try{var t,s,o,n,i;const r=await p().getBinaryContent(l),d=new Uint8Array(r).buffer,m=new(c());await m.loadAsync(d);const v={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(null===(t=window.adobeIMS)||void 0===t||null===(s=t.getTokenFromStorage())||void 0===s?void 0:s.token),"x-api-key":null===(o=window)||void 0===o||null===(n=o.adobeIMS)||void 0===n||null===(i=n.adobeIdData)||void 0===i?void 0:i.client_id}},g=await fetch(e,v);if(200===g.status){const e=await g.json();m.file("credential.json",JSON.stringify(e));const l=await m.generateAsync({type:"blob"});(0,u.saveAs)(l,`${a}.zip`)}else console.error("Failed to fetch additional data. Response status:",g.status)}catch(r){console.error("An error occurred:",r)}finally{U(!1)}};return(0,o.tZ)("div",{className:i()(null==J?void 0:J.className),css:A},(0,o.tZ)("div",{className:i()(null==J?void 0:J.className),css:(0,o.iv)("display:flex;flex-direction:column;gap:16px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",m.xU,") and (max-width: ",m.Ey,"){padding:0;width:100%;}","")},(0,o.tZ)("div",{css:j},(null==J?void 0:J.title)&&(0,o.tZ)("h2",{className:"spectrum-Heading spectrum-Heading--sizeL",css:B},null==J?void 0:J.title),$&&(0,o.tZ)("div",{css:L},(0,o.tZ)("div",{className:"spectrum-ProgressCircle spectrum-ProgressCircle--indeterminate spectrum-ProgressCircle--small"},(0,o.tZ)("div",{className:"spectrum-ProgressCircle-track"}),(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fills"},(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fillMask1"},(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fillSubMask1"},(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fill"}))),(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fillMask2"},(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fillSubMask2"},(0,o.tZ)("div",{className:"spectrum-ProgressCircle-fill"}))))),(0,o.tZ)("p",{css:P},"Downloading..."))),n.Downloads&&(null==J?void 0:J.paragraph)&&(0,o.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeL",css:z},null==J?void 0:J.paragraph),n.Downloads&&(0,o.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:S},"Download not working?",(0,o.tZ)("button",{css:D,onClick:()=>G(`/console/api/organizations/${null==E?void 0:E.id}/projects/${r.projectId}/workspaces/${r.workspaceId}/download`,n.Download,n.zipUrl),"data-cy":"restart-download"},"Restart download"))),(0,o.tZ)("div",{css:(0,o.iv)("display:flex;gap:35px;@media screen and (min-width: ",m.xU,") and (max-width: ",m.Ey,"){flex-direction:column;padding-left:0;}","")},(0,o.tZ)("div",{css:(0,o.iv)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",m.xU,") and (max-width: ",m.Ey,"){width:100%;}","")},(0,o.tZ)(C.W,{credentialName:n.CredentialName,productList:T,ProductComponent:g.bi,AccessTokenComponent:y.J,DevConsoleLinkComponent:w.A,ClientDetailsComponent:h._,allowedOriginsDetails:n.AllowedOrigins,organizationName:E,response:r,nextButtonLink:null==J?void 0:J.nextStepsHref,nextButtonLabel:null==J?void 0:J.nextStepsLabel,devConsoleLink:null==J?void 0:J.devConsoleDirection,developerConsoleManage:null==J?void 0:J.developerConsoleManage,myCredentialFields:R,collapse:null==J?void 0:J.isCollapsable}),(0,o.tZ)("div",{css:N},(0,o.tZ)("h4",{className:"spectrum-Heading spectrum-Heading--sizeXS",css:k},"Need another credential"),(0,o.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS"},(0,o.tZ)("button",{onClick:d,css:Z,"data-cy":"Restart-new-credential"},"Restart and create a new credential")))),null!=J&&J.children?(0,o.tZ)(b.c,{sideContent:null===(l=R[f.v])||void 0===l?void 0:l.children,SideComp:f.v}):null),F&&(0,o.tZ)(v.F,{variant:"success",message:"Copied to clipboard",disable:1e3,customDisableFunction:H}))}}}]);
//# sourceMappingURL=862bb76f-62f86e81e57999ae60ec.js.map