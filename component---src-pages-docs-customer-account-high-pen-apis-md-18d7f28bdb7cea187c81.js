"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9219],{18868:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return i},default:function(){return u}});var a=t(87462),r=t(45987),d=(t(35776),t(3905)),s=t(91515);const o=["components"],i={},l={_frontmatter:i},m=s.Z;function u(e){let{components:n}=e,t=(0,r.Z)(e,o);return(0,d.mdx)(m,(0,a.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"manage-high-penetration-offers-through-apis"},"Manage high penetration offers through APIs"),(0,d.mdx)("p",null,"You can manage the following operations through APIs:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"Preview renewl offers"),(0,d.mdx)("li",{parentName:"ul"},"Update subscription"),(0,d.mdx)("li",{parentName:"ul"},"Create subscription"),(0,d.mdx)("li",{parentName:"ul"},"Get subscription"),(0,d.mdx)("li",{parentName:"ul"},"Create order")),(0,d.mdx)("h2",{id:"preview-renewal-offers"},"Preview renewal offers"),(0,d.mdx)("p",null,"Use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"PreviewRenwal")," API to get the preview of renewal order for the customer. This is the same ",(0,d.mdx)("inlineCode",{parentName:"p"},"POST v3/customers/{customer-id}/orders")," with ",(0,d.mdx)("inlineCode",{parentName:"p"},"orderType")," as ",(0,d.mdx)("em",{parentName:"p"},"PREVIEW_RENEWAL"),"."),(0,d.mdx)("h3",{id:"request-header"},"Request header"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Parameter"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"X-Request-Id"),(0,d.mdx)("td",{parentName:"tr",align:null},"A unique identifier for the call. The value should be reset for every single request. If this is not provided, then a request ID will be automatically generated. Using a duplicate request ID may return an error.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"X-Correlation-Id"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("strong",{parentName:"td"},"Required"),". A unique identifier for the call. This is to ensure idempotency. In the case of a timeout, the retry call could include the same value. Upon receiving some response, the value should be reset for the next call.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Accept"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("strong",{parentName:"td"},"Required"),'. Specifies the response type. Must be "application/json" for proper usage.')),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Content-Type"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("strong",{parentName:"td"},"Required"),'. Specifies the request type. Must be "application/json" for proper usage.')),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Authorization"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("strong",{parentName:"td"},"Required"),". Authorization token in the form ",(0,d.mdx)("inlineCode",{parentName:"td"},"Bearer <token>"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"X-Api-Key"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("strong",{parentName:"td"},"Required"),". The API Key for your integration")))),(0,d.mdx)("h3",{id:"request-body"},"Request body"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},' { "orderType": "PREVIEW_RENEWAL" }\n')),(0,d.mdx)("h3",{id:"response-body"},"Response body"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "referenceOrderId": "",\n  "orderId": "",\n  "customerId": "1005388836",\n  "currencyCode": "USD",\n  "orderType": "PREVIEW_RENEWAL",\n  "status": "",\n  "lineItems":\n    [\n      {\n        "extLineItemNumber": 1,\n        "offerId": "65324918CA02A12",\n        "quantity": 10,\n        "subscriptionId": "a5ea3c7a764545a711d2a153678f02NA",\n        "status": "",\n      },\n    ],\n  "eligibleOffers":\n    [\n      {\n        "offerId": "65324918CA01X12",\n        "discountCode": "MOQ_X",\n        "eligibility":\n          {\n            "minQuantity": 100,\n            "eligibleCustomer": ["THREE_YEAR_COMMIT"],\n            "deploymentId": "1450043516",\n          },\n      },\n      {\n        "offerId": "65324918CA01Y12",\n        "discountCode": "MOQ_Y",\n        "eligibility":\n          {\n            "minQuantity": 250,\n            "eligibleCustomer": ["THREE_YEAR_COMMIT"],\n            "deploymentId": "1450043516",\n          },\n      },\n      {\n        "offerId": "65324918CA01Z12",\n        "discountCode": "MOQ_Z",\n        "eligibility":\n          { "minQuantity": 500, "eligibleCustomer": ["THREE_YEAR_COMMIT"] },\n      },\n    ],\n  "creationDate": "2024-04-01T07:26:05Z",\n}\n')),(0,d.mdx)("p",null,"Success Response if customer has already opted for 100MOQX:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n\n  "referenceOrderId": "",\n  "orderId": "",\n  "customerId": "1005388836",\n  "currencyCode": "USD",\n  "orderType": "PREVIEW_RENEWAL",\n  "status": "",\n  "lineItems": [\n    {\n      "extLineItemNumber": 1,\n      "offerId": "65324918CA01X12",\n      "quantity": 100,\n      "subscriptionId": "a5ea3c7a764545a711d2a153678f02NA",\n      "status": ""\n    }\n  ],\n  "eligibleOffers": [\n    {\n      "offerId": "65324918CA01X12",\n      "discountCode": "MOQ_X",\n      "eligibility": {\n        "minQuantity": 100,\n        "eligibleCustomer": [\n          "THREE_YEAR_COMMIT"\n        ],\n        "deploymentId": "1450043516"\n      }\n    },\n    {\n      "offerId": "65324918CA01Y12",\n      "discountCode": "MOQ_Y",\n      "eligibility": {\n        "minQuantity": 250,\n        "eligibleCustomer": [\n          "THREE_YEAR_COMMIT"\n        ],\n        "deploymentId": "1450043516"\n      }\n    },\n    {\n      "offerId": "65324918CA01Z12",\n      "discountCode": "MOQ_Z",\n      "eligibility": {\n        "minQuantity": 500,\n        "eligibleCustomer": [\n          "THREE_YEAR_COMMIT"\n        ]\n      }\n    }\n  ],\n  "creationDate": "2024-04-01T07:26:05Z"\n}\n')),(0,d.mdx)("h3",{id:"http-status-codes"},"HTTP status codes"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Status code"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"200"),(0,d.mdx)("td",{parentName:"tr",align:null},"AutoRenewal updated")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"400"),(0,d.mdx)("td",{parentName:"tr",align:null},"Bad request")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"401"),(0,d.mdx)("td",{parentName:"tr",align:null},"Invalid Authorization token")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"403"),(0,d.mdx)("td",{parentName:"tr",align:null},"Invalid API Key")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"404"),(0,d.mdx)("td",{parentName:"tr",align:null},"Invalid customer ID")))),(0,d.mdx)("h4",{id:"sample-response-in-case-of-failure"},"Sample response in case of failure"),(0,d.mdx)("p",null,"Upon failure, the response the appropriate HTTP status code based on the reason/type of failure will be sent."),(0,d.mdx)("p",null,"Failure response:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{ "code": "4115", "message": "Api Key is invalid or missing" }\n')),(0,d.mdx)("h2",{id:"update-subscription"},"Update subscription"),(0,d.mdx)("p",null,"Use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"PATCH /v3/customers/{customer-id}/subscriptions/{sub-id}reset-discount-code=false")," API to update the renewal preferences for the customer's subscription with the MOQ offer details."),(0,d.mdx)("h3",{id:"request-header-1"},"Request header"),(0,d.mdx)("p",null,"Same as the ",(0,d.mdx)("a",{parentName:"p",href:"#request-header"},"request header given in the previous endpoint"),"."),(0,d.mdx)("h3",{id:"request-body-1"},"Request body"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "autoRenewal": {\n        "enabled": true,\n        "renewalQuantity": 100,\n        "discountCode": "MOQ_X"\n    }\n}\n')),(0,d.mdx)("h4",{id:"query-parameter"},"Query parameter"),(0,d.mdx)("p",null,"Optional Query param: reset-discount-code (reset-discount-code will be used to remove the discountCode after it has been opted by customer)"),(0,d.mdx)("p",null,"Possible values are ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")," or ",(0,d.mdx)("inlineCode",{parentName:"p"},"false"),", and the default is ",(0,d.mdx)("inlineCode",{parentName:"p"},"false")),(0,d.mdx)("h3",{id:"request-response"},"Request response"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "subscriptionId": "a028303a454a168d6b824b6c0dfcc5NA",\n    "offerId": "65324918CA01A12",\n    "currentQuantity": 10,\n    "usedQuantity": 0,\n    "autoRenewal": {\n        "enabled": true,\n        "renewalQuantity": 100,\n        "discountCode": "MOQ_X"\n    },\n    "creationDate": "2023-09-22T08:38:27Z",\n    "renewalDate": "2024-09-22",\n    "status": "1000",\n    "deployToId": "",\n    "currencyCode": "USD",\n    "links": {\n        "self": {\n            "uri": "/v3/customers/1005388836/subscriptions/a028303a454a168d6b824b6c0dfcc5NA",\n            "method": "GET",\n            "headers": []\n        }\n    }\n}\n')),(0,d.mdx)("h3",{id:"http-status-code"},"HTTP Status code"),(0,d.mdx)("p",null,"Same as ",(0,d.mdx)("a",{parentName:"p",href:"#http-status-code"},"status codes mentioned in the previous API section"),"."),(0,d.mdx)("h4",{id:"sample-failure-response"},"Sample failure response"),(0,d.mdx)("p",null,"On failure, the response the appropriate HTTP status code based on the reason/type of failure will be sent. For example, if the API key is invalid , the response has status HTTP 403 and the failure response as:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{ "code": "4115", "message": "Api Key is invalid or missing" }\n')),(0,d.mdx)("h2",{id:"create-subscription"},"Create subscription"),(0,d.mdx)("p",null,"Use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"POST v3/customers/{{customerId}}/subscriptions")," API to create a subscription for the specific customer."),(0,d.mdx)("p",null,"For global customers, the following parameters are required:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"currencyCode: required (For Global Customer)"),(0,d.mdx)("li",{parentName:"ul"},"deployTo: could be part of later release (see if can be included now)"),(0,d.mdx)("li",{parentName:"ul"},"part of getsubscription as swell")),(0,d.mdx)("h3",{id:"request-header-2"},"Request header"),(0,d.mdx)("p",null,"Same as the ",(0,d.mdx)("a",{parentName:"p",href:"#request-header"},"request header given in the previous endpoint"),"."),(0,d.mdx)("h3",{id:"request-body-2"},"Request body"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "offerId": "65322450CA01X12",\n    "discountCode": "MOQ_X",\n    "autoRenewal": {\n        "renewalQuantity": 100\n    }\n}\n')),(0,d.mdx)("h3",{id:"request-response-1"},"Request response"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "subscriptionId": "e0b170437c4e96ac5428364f674dffNA",\n    "offerId": "65322450CA01X12",\n    "currentQuantity": 0,\n    "usedQuantity": 0,\n    "autoRenewal": {\n        "enabled": true,\n        "renewalQuantity": 100,\n        "discountCode": "MOQ_X"\n    },\n    "creationDate": "2023-07-18T05:20:19Z",\n    "renewalDate": "2024-07-18",\n    "status": "1009", // Scheduled\n    "currencyCode": "USD",\n    "links": {\n        "self": {\n            "uri": "/v3/customers/1005331016/subscriptions/e0b170437c4e96ac5428364f674dffNA",\n            "method": "GET",\n            "headers": []\n        }\n    }\n}\n')),(0,d.mdx)("h3",{id:"http-status-codes-1"},"HTTP status codes"),(0,d.mdx)("p",null,"Same as ",(0,d.mdx)("a",{parentName:"p",href:"#http-status-code"},"status codes mentioned in the previous API section"),"."),(0,d.mdx)("h2",{id:"get-subscription"},"Get subscription"),(0,d.mdx)("p",null,"Use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"GET /v3/customers/{{customerId}}/subscriptions")," API to get the subscription details."),(0,d.mdx)("h3",{id:"request-header-3"},"Request header"),(0,d.mdx)("p",null,"Same as the ",(0,d.mdx)("a",{parentName:"p",href:"#request-header"},"request header given in the previous endpoint"),"."),(0,d.mdx)("h3",{id:"request-body-3"},"Request body"),(0,d.mdx)("p",null,"None."),(0,d.mdx)("h3",{id:"request-response-2"},"Request response"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "subscriptionId": "e01756010447808cd0463411464d87NA",\n    "offerId": "65324918CA01A12",\n    "currentQuantity": 2,\n    "usedQuantity": 0,\n    "autoRenewal": {\n        "enabled": true,\n        "renewalQuantity": 100,\n        "discountCode": "MOQ_X"\n    },\n    "creationDate": "2024-06-18T09:49:10Z",\n    "renewalDate": "2025-06-18",\n    "status": "1000",\n    "deploymentId": "",\n    "currencyCode": "USD",\n    "links": {\n        "self": {\n            "uri": "/v3/customers/1005481955/subscriptions/e01756010447808cd0463411464d87NA",\n            "method": "GET",\n            "headers": []\n        }\n    }\n}\n')),(0,d.mdx)("h3",{id:"http-status-code-1"},"HTTP Status code"),(0,d.mdx)("p",null,"Same as ",(0,d.mdx)("a",{parentName:"p",href:"#http-status-code"},"status codes mentioned in the previous API section"),"."),(0,d.mdx)("h2",{id:"create-order"},"Create order"),(0,d.mdx)("p",null,"No change in the API request or response. Read more about ",(0,d.mdx)("a",{parentName:"p",href:"../order_management/create_order.md"},"how to create order through API"),". Customer can send ",(0,d.mdx)("inlineCode",{parentName:"p"},"offerId")," corresponding to MOQ, for example 65322450CA01X12, to create mid term purchase order of MOQ."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docs-customer-account-high-pen-apis-md-18d7f28bdb7cea187c81.js.map